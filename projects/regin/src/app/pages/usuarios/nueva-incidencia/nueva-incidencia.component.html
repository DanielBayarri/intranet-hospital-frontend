<section class="h-full mx-5">
  <app-breadcrumb />
  <h3 class="font-medium text-center">
    <i class="pi pi-pen-to-square text-teal-500 ml-4 px-2"></i> Nueva Incidencia
  </h3>
  <p-toast />
  <div class="max-w-6xl mx-auto">
    <p-panel>
      <form
        [formGroup]="myForm"
        (ngSubmit)="onSubmit()"
        class="grid grid-cols-3 gap-8"
      >
        <!-- Fecha Hoy -->
        <div class="card flex">
          <p-fieldset legend="Fecha de hoy">
            <p class="m-0 pl-2">
              {{ fechaHoy | date : " dd-MM-yyyy" }}
            </p>
          </p-fieldset>
        </div>

        <!-- Turnos -->
        <div class="flex flex-col gap-3">
          <div *ngFor="let turno of turnosList" class="field-checkbox">
            <p-radioButton
              [inputId]="turno.id.toString()"
              [value]="turno"
              formControlName="turno"
            />
            <label [for]="turno" class="ml-1">
              {{ turno.nombre }}
            </label>
          </div>
        </div>
        <!-- Tipo -->
        <div class="p-field p-grid">
          <label for="tipo" class="block mb-2" style="width: 100px">Tipo</label>
          <p-dropdown
            id="tipo"
            [options]="tiposList"
            formControlName="tipo"
            optionLabel="nombre"
            placeholder="Seleccione un tipo"
            (onChange)="onTipoSelectionChange($event)"
          ></p-dropdown>
          <div
            *ngIf="myForm.get('tipo')?.invalid && myForm.get('tipo')?.touched"
          >
            <small class="p-error">El tipo es requerido</small>
          </div>
        </div>

        <!-- Titulo -->
        <div class="p-field p-grid">
          <label for="titulo" class="block mb-2" style="width: 100px"
            >Titulo</label
          >
          <div class="p-col">
            <input
              id="titulo"
              type="text"
              pInputText
              formControlName="titulo"
              class="p-inputtext"
              placeholder="Ingrese el título"
            />
            <div
              *ngIf="
                myForm.get('titulo')?.invalid && myForm.get('titulo')?.touched
              "
            >
              <small class="p-error">El título es requerido</small>
            </div>
          </div>
        </div>

        <!-- Hora inicio -->
        <div class="flex-auto">
          <label for="calendar-timeonly" class="block mb-2">
            Hora Inicio
          </label>
          <p-calendar
            inputId="calendar-timeonly"
            formControlName="horaInicio"
            [timeOnly]="true"
          />
          <div
            *ngIf="
              myForm.get('horaInicio')?.invalid &&
              myForm.get('horaInicio')?.touched
            "
          >
            <small class="p-error">La hora de inicio es requerida</small>
          </div>
        </div>

        <!-- Subtipo -->
        <div class="p-field p-grid">
          <label for="subtipo" class="block mb-2" style="width: 100px"
            >Subtipo</label
          >
          <div class="p-col">
            <p-dropdown
              id="subtipo"
              [options]="subtiposList"
              formControlName="subtipo"
              optionLabel="nombre"
              placeholder="Seleccione un subtipo"
              [disabled]="true"
            ></p-dropdown>
            <div
              *ngIf="
                myForm.get('subtipo')?.invalid && myForm.get('subtipo')?.touched
              "
            >
              <small class="p-error">El subtipo es requerido</small>
            </div>
          </div>
        </div>

        <!-- Comentario -->
        <div class="col-span-3">
          <label for="comentario" class="block mb-2" style="width: 100px"
            >Comentario</label
          >
          <div class="">
            <textarea
              style="width: 90%"
              id="comentario"
              pInputTextarea
              formControlName="comentario"
              rows="5"
              placeholder="Escribe tu comentario"
              class="p-inputtext-sm"
            ></textarea>
            <div
              *ngIf="
                myForm.get('comentario')?.invalid &&
                myForm.get('comentario')?.touched
              "
            >
              <small class="p-error">El comentario es requerido</small>
            </div>
          </div>
        </div>

        <!-- Botón de enviar -->
        <div class="col-span-3">
          <div class="mx-auto">
            <button
              pButton
              label="Crear Incidencia"
              type="submit"
              [disabled]="myForm.invalid"
            ></button>
          </div>
        </div>
      </form>
    </p-panel>
  </div>
  <h3 class="font-medium text-center">
    <i class="pi pi-car text-teal-500 ml-4 px-2 my-5"></i> Nueva Guardia
    Localizada
  </h3>
</section>
